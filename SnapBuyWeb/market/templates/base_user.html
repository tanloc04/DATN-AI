<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <title>
      {% block title %}
      {% endblock %}
    </title>
    <style>
  :root {
    --primary-color: #007bff;
    --hover-color: #0056b3;
    --secondary-color: #6c757d;
    --background-color: #f8f9fa;
    --text-color: #212529;
    --border-color: #dee2e6;
    --card-bg: #ffffff;
  }

  body {
    background-color: var(--background-color);
    color: var(--text-color);
  }

  .navbar {
    background-color: var(--primary-color) !important;
  }

  .navbar .nav-link,
  .navbar-brand {
    color: #fff !important;
  }

  .navbar .nav-link:hover {
    color: #dbeeff !important;
  }

  .dropdown-menu a:hover,
  .dropdown-item:hover {
    background-color: var(--background-color);
    color: var(--text-color);
  }

  .btn-primary {
    background-color: var(--primary-color);
    border: none;
  }

  .btn-primary:hover {
    background-color: var(--hover-color);
  }

  .card.product-card {
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    transition: 0.2s;
    color: var(--text-color);
  }

  .card.product-card:hover {
    box-shadow: 0 6px 15px rgba(0, 123, 255, 0.2);
    transform: translateY(-5px);
  }

  .alert {
    border: none;
  }

  footer {
    background-color: #212529;
    color: white;
  }

  footer a {
    color: white;
    transition: color 0.2s;
  }

  footer a:hover {
    color: var(--primary-color);
  }
</style>


  </head>
  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm border-bottom border-secondary">
  <div class="container-fluid px-4">
    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center fw-bold" href="{{ url_for('market_page') }}">
      <img src="{{ url_for('static', filename='images/logo.png') }}" alt="SnapBuy Logo" height="34" class="me-2">
    </a>

    <!-- Toggle button for mobile -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation items -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <!-- Left links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <!-- Dropdown sản phẩm -->
        <li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="productDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <i class="bi bi-box-seam me-1"></i> Sản phẩm
  </a>
  <ul class="dropdown-menu dropdown-menu-lg-end shadow-sm p-2" aria-labelledby="productDropdown" style="min-width: 240px;">
    <li><a class="dropdown-item d-flex align-items-center" href="#">
      <i class="bi bi-phone me-2 text-info"></i> Đồ điện tử
    </a></li>
    <li><a class="dropdown-item d-flex align-items-center" href="#">
      <i class="bi bi-house-door me-2 text-success"></i> Đồ gia dụng
    </a></li>
    <li><a class="dropdown-item d-flex align-items-center" href="#">
      <i class="bi bi-controller me-2 text-warning"></i> Đồ chơi
    </a></li>
    <li><a class="dropdown-item d-flex align-items-center" href="#">
      <i class="bi bi-headphones me-2 text-secondary"></i> Phụ kiện
    </a></li>
    <li><a class="dropdown-item d-flex align-items-center" href="#">
      <i class="bi bi-book me-2 text-warning"></i> Sách
    </a></li>
  </ul>
</li>

        <li class="nav-item">
  <a class="nav-link" href="#">
    <i class="bi bi-newspaper me-1"></i> Tin tức
  </a>
</li>

<li class="nav-item">
  <a class="nav-link" href="#">
    <i class="bi bi-info-circle me-1"></i> Về chúng tôi
  </a>
</li>

<li class="nav-item">
  <a class="nav-link" href="#">
    <i class="bi bi-stars me-1"></i> Sản phẩm nổi bật
  </a>
</li>

{% if current_user.is_authenticated and session['role'] == 'user' %}
<li class="nav-item">
  <a class="nav-link" href="{{ url_for('view_orders') }}">
    <i class="bi bi-bag-check me-1"></i> Đơn hàng
  </a>
</li>
{% endif %}

      </ul>

      <!-- Center: Search -->
      <form class="d-none d-lg-flex position-relative mx-auto" method="GET" action="{{ url_for('search_product') }}" style="width: 320px;">
  <span class="position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"><i class="bi bi-search"></i></span>
  <input class="form-control ps-5 rounded-pill" type="search" name="q" placeholder="Tìm sản phẩm..." aria-label="Search">
</form>


      <!-- Right: Avatar, cart, logout -->
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
        {% if current_user.is_authenticated %}
          <li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <div class="rounded-circle bg-light text-dark d-flex justify-content-center align-items-center me-2 shadow-sm" style="width: 32px; height: 32px; font-weight: bold;">
      {{ current_user.username[0]|upper }}
    </div>
    <span class="fw-semibold">{{ current_user.username }}</span>
  </a>
  <ul class="dropdown-menu dropdown-menu-end shadow-sm rounded-3" aria-labelledby="userDropdown">
    <li>
      <a class="dropdown-item d-flex align-items-center" href="{{ url_for('user_profile') }}">
        <i class="bi bi-person-circle me-2 text-primary"></i> Hồ sơ của tôi
      </a>
    </li>
    <li>
      <a class="dropdown-item d-flex align-items-center" href="{{ url_for('view_cart') }}">
        <i class="bi bi-cart-check me-2 text-success"></i> Giỏ hàng
      </a>
    </li>
    <li><hr class="dropdown-divider"></li>
    <li>
      <a class="dropdown-item d-flex align-items-center text-danger" href="{{ url_for('logout') }}">
        <i class="bi bi-box-arrow-right me-2"></i> Đăng xuất
      </a>
    </li>
  </ul>
</li>

        {% else %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('login_by_user') }}">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('register_user') }}">Register</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>


    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
           {% for category, message in messages %}
              <div class="alert alert-{{ category }}">
                  <button type="button" class="m1-2 mb-1 close" data-dismiss="alert" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
                  {{ message }}
              </div>
           {% endfor %}
        {% endif %}
      {% endwith %}

      <main class="flex-fill" style="padding-bottom: 40px;">
        {% block content %}
        {% endblock %}
      </main>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

  <footer class="bg-dark text-white pt-4 mt-auto border-top">
  <div class="container">

    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-3">
      <div class="text-center text-md-start mb-2 mb-md-0">
        <strong>Snapbuy</strong> &mdash; © 2025 All rights reserved.
      </div>
      <div class="d-flex justify-content-center gap-3">
        <a href="#" target="_blank" class="text-white social-icon">
          <i class="bi bi-facebook fs-5"></i>
        </a>
        <a href="#" class="text-white social-icon">
          <i class="bi bi-envelope-fill fs-5"></i>
        </a>
      </div>
    </div>

    <div class="row text-center text-md-start border-top pt-3">
      <div class="col-md-4 mb-3">
        <h6 class="text-uppercase">Liên hệ</h6>
        <p class="mb-1"><i class="bi bi-person-fill me-2"></i>Nguyễn Tấn Lộc & Lê Hồ Thành Tài</p>
        <p class="mb-1"><i class="bi bi-telephone-fill me-2"></i>0901 234 567</p>
        <p class="mb-0"><i class="bi bi-geo-alt-fill me-2"></i>123 Đường Lê Lợi, Quận 1, TP.HCM</p>
      </div>
      <div class="col-md-4 mb-3">
        <h6 class="text-uppercase">Email</h6>
        <p class="mb-0"><i class="bi bi-envelope me-2"></i>lehothanhtai@gmail.com</p>
      </div>
      <div class="col-md-4 mb-3">
        <h6 class="text-uppercase">Giờ làm việc</h6>
        <p class="mb-0"><i class="bi bi-clock me-2"></i>Thứ 2 - Thứ 6: 8h - 17h</p>
      </div>
    </div>

  </div>
</footer>

  </body>
</html>